(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b64a9"],{"1d11":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"未读消息",name:"notRead"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.notReadLoading,expression:"notReadLoading"}],staticStyle:{width:"100%"},attrs:{data:e.notReadMsg.filter((function(t){return!e.search||t.msg_title.toLowerCase().includes(e.search.toLowerCase())}))}},[a("el-table-column",{attrs:{width:"250",label:"发布日期",prop:"send_time"}}),e._v(" "),a("el-table-column",{attrs:{label:"标题内容",prop:"msg_title"}}),e._v(" "),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleDetail(t.$index,t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleRead(t.$index,t.row)}}},[e._v("已读")])]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"已读消息",name:"read"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.readLoading,expression:"readLoading"}],staticStyle:{width:"100%"},attrs:{data:e.readMsg.filter((function(t){return!e.search2||t.title.toLowerCase().includes(e.search2.toLowerCase())}))}},[a("el-table-column",{attrs:{width:"250",label:"发布日期",prop:"send_time"}}),e._v(" "),a("el-table-column",{attrs:{label:"标题内容",prop:"msg_title"}}),e._v(" "),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search2,callback:function(t){e.search2=t},expression:"search2"}})]}},{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleDetail(t.$index,t.row)}}},[e._v("查看")])]}}])})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.curMsg.title,visible:e.dialogVisible,width:"50%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("p",{domProps:{innerHTML:e._s(e.curMsg.content)}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确 定")])],1)])],1)],1)},i=[],s=a("b775"),o={data:function(){return{activeName:"notRead",notReadMsg:[],readMsg:[],search:"",search2:"",dialogVisible:!1,curMsg:{},readLoading:!0,notReadLoading:!0,isFirst:!0}},created:function(){var e=this;Object(s["a"])({url:"/message/unreadlist",method:"GET"}).then((function(t){2e3===t.code?e.notReadMsg=t.data.msgs:e.$message.error(t.msg),e.notReadLoading=!1}))},methods:{handleClick:function(){var e=this;console.log(this.activeName),"read"===this.activeName&&Object(s["a"])({url:"/message/readlist",method:"GET"}).then((function(t){2e3===t.code?e.readMsg=t.data.msgs:e.$message.error(t.msg),e.readLoading=!1}))},handleDetail:function(e,t){var a=this,n=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.curMsg.title=t.title,this.dialogVisible=!0;var i={data:{msg_id:t.msg_id}};Object(s["a"])({url:"/message/detail",method:"POST",data:i}).then((function(e){2e3===e.code?a.curMsg={title:t.msg_title,content:e.data,msg_id:t.msg_id}:a.$message.error(e.msg),n.close()}))},handleRead:function(e,t){this.postRead(t)},postRead:function(e){var t=this,a={data:{msg_id:e.msg_id}};Object(s["a"])({url:"/message/change",method:"POST",data:a}).then((function(e){2e3===e.code?t.$message.success("修改成功"):t.$message.error(e.msg),t.notReadLoading=!1,location.reload()}))},handleClose:function(){"notRead"===this.activeName&&this.postRead(this.curMsg)},handleConfirm:function(){this.dialogVisible=!1,"notRead"===this.activeName&&this.postRead(this.curMsg)}}},l=o,r=a("2877"),d=Object(r["a"])(l,n,i,!1,null,null,null);t["default"]=d.exports}}]);